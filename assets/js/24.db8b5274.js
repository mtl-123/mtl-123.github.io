(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{378:function(s,t,a){"use strict";a.r(t);var e=a(8),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("hr"),s._v(" "),t("h1",{attrs:{id:"⚙️-wsl-后台运行与网络访问配置指南"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#⚙️-wsl-后台运行与网络访问配置指南"}},[s._v("#")]),s._v(" ⚙️ WSL 后台运行与网络访问配置指南")]),s._v(" "),t("blockquote",[t("p",[s._v("💡 本文档讲解如何让 WSL 在后台持续运行，并实现从局域网访问 WSL 内部服务。")])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"第一章-保持-wsl-在后台持续运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一章-保持-wsl-在后台持续运行"}},[s._v("#")]),s._v(" 第一章：保持 WSL 在后台持续运行")]),s._v(" "),t("blockquote",[t("p",[s._v("📌 当退出终端后，WSL 可能会自动关闭，导致 SSH 或其他服务中断。")])]),s._v(" "),t("h3",{attrs:{id:"_1-1-解决方案概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-解决方案概述"}},[s._v("#")]),s._v(" 1.1 解决方案概述")]),s._v(" "),t("p",[s._v("为了让 WSL 持续运行，我们采用 "),t("code",[s._v(".vbs")]),s._v(" 脚本在系统启动时自动运行一个 WSL 终端进程，防止 WSL 因无活动进程而关闭。")]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_1-2-创建后台运行脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-创建后台运行脚本"}},[s._v("#")]),s._v(" 1.2 创建后台运行脚本")]),s._v(" "),t("h4",{attrs:{id:"文件名-start-wsl-background-vbs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件名-start-wsl-background-vbs"}},[s._v("#")]),s._v(" 文件名："),t("code",[s._v("start-wsl-background.vbs")])]),s._v(" "),t("div",{staticClass:"language-vbs line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('Set objShell = CreateObject("WScript.Shell")\nobjShell.Run "cmd /c wsl", 0, False\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("📌 "),t("strong",[s._v("说明：")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("cmd /c wsl")]),s._v("：执行一次 "),t("code",[s._v("wsl")]),s._v(" 命令，进入默认发行版")]),s._v(" "),t("li",[t("code",[s._v("0")]),s._v("：表示窗口隐藏运行")]),s._v(" "),t("li",[t("code",[s._v("False")]),s._v("：不等待脚本执行完成")])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_1-3-设置开机自启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-设置开机自启动"}},[s._v("#")]),s._v(" 1.3 设置开机自启动")]),s._v(" "),t("ol",[t("li",[s._v("按下 "),t("code",[s._v("Win + R")]),s._v(" 输入 "),t("code",[s._v("shell:startup")]),s._v(" 打开“启动”文件夹")]),s._v(" "),t("li",[s._v("将上述 "),t("code",[s._v(".vbs")]),s._v(" 文件复制到该文件夹中")])]),s._v(" "),t("p",[s._v("✅ "),t("strong",[s._v("效果：")])]),s._v(" "),t("ul",[t("li",[s._v("Windows 开机后自动静默运行 WSL")]),s._v(" "),t("li",[s._v("即使关闭终端，WSL 也不会退出")])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"第二章-让宿主机及局域网访问-wsl-中的服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二章-让宿主机及局域网访问-wsl-中的服务"}},[s._v("#")]),s._v(" 第二章：让宿主机及局域网访问 WSL 中的服务")]),s._v(" "),t("blockquote",[t("p",[s._v("💡 示例：你在 WSL 中运行了一个 Python HTTP 服务监听在 "),t("code",[s._v("8000")]),s._v(" 端口，如何让局域网访问？")])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_2-1-在-wsl-中启动服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-在-wsl-中启动服务"}},[s._v("#")]),s._v(" 2.1 在 WSL 中启动服务")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" python3 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" http.server "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("hr"),s._v(" "),t("h3",{attrs:{id:"_2-2-获取-wsl-的-ip-地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-获取-wsl-的-ip-地址"}},[s._v("#")]),s._v(" 2.2 获取 WSL 的 IP 地址")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hostname")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-I")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("假设输出为：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("172.27.250.42\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"第三章-配置-windows-端口转发-port-proxy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第三章-配置-windows-端口转发-port-proxy"}},[s._v("#")]),s._v(" 第三章：配置 Windows 端口转发（Port Proxy）")]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_3-1-获取-wsl-网卡名称"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-获取-wsl-网卡名称"}},[s._v("#")]),s._v(" 3.1 获取 WSL 网卡名称")]),s._v(" "),t("p",[s._v("在 PowerShell 中执行：")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("ipconfig "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("all\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("找到类似如下信息：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("以太网适配器 vEthernet (WSL (Hyper-V firewall)):\n\n   IPv4 地址 . . . . . . . . . . . . : 172.27.240.1(首选)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("hr"),s._v(" "),t("h3",{attrs:{id:"_3-2-添加防火墙规则允许访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-添加防火墙规则允许访问"}},[s._v("#")]),s._v(" 3.2 添加防火墙规则允许访问")]),s._v(" "),t("p",[s._v("管理员身份打开 PowerShell 并执行：")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("New-NetFirewallRule")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("DisplayName "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"WSL"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Direction Inbound "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("InterfaceAlias "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vEthernet (WSL (Hyper-V firewall))"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Action Allow\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("hr"),s._v(" "),t("h3",{attrs:{id:"_3-3-【新增】检查宿主机端口是否被占用-非常重要"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-【新增】检查宿主机端口是否被占用-非常重要"}},[s._v("#")]),s._v(" 3.3 【新增】检查宿主机端口是否被占用（非常重要！）")]),s._v(" "),t("p",[s._v("在添加 Port Proxy 规则前，必须确保你选择的 "),t("code",[s._v("listenport")]),s._v("（如 "),t("code",[s._v("8000")]),s._v("）没有被 Windows 上的程序占用。")]),s._v(" "),t("h4",{attrs:{id:"方法一-使用-netstat-查看端口占用情况"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法一-使用-netstat-查看端口占用情况"}},[s._v("#")]),s._v(" 方法一：使用 "),t("code",[s._v("netstat")]),s._v(" 查看端口占用情况")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("netstat "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ano "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v(" findstr :8000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果输出为空，则说明端口未被占用，可以使用。")]),s._v(" "),t("p",[s._v("如果输出类似：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("TCP    0.0.0.0:8000           0.0.0.0:0              LISTENING       1234\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("说明端口已被占用，你可以查看 PID "),t("code",[s._v("1234")]),s._v(" 是哪个程序：")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("tasklist "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v(" findstr 1234\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("hr"),s._v(" "),t("h3",{attrs:{id:"_3-4-配置端口转发-port-proxy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-配置端口转发-port-proxy"}},[s._v("#")]),s._v(" 3.4 配置端口转发（Port Proxy）")]),s._v(" "),t("p",[s._v("确认端口可用后执行：")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("netsh interface portproxy add v4tov4 listenaddress=0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0 listenport=8000 connectaddress=172"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("27"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("250"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("42 connectport=8000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("hr"),s._v(" "),t("h3",{attrs:{id:"_3-5-查看当前-port-proxy-规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-查看当前-port-proxy-规则"}},[s._v("#")]),s._v(" 3.5 查看当前 Port Proxy 规则")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("netsh interface portproxy show all\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("输出示例：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("侦听 ipv4:                 连接到 ipv4:\n\n地址            端口        地址            端口\n--------------- ----------  --------------- ----------\n0.0.0.0         22          172.20.146.51   22\n0.0.0.0         8000        172.27.250.42   8000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("hr"),s._v(" "),t("h3",{attrs:{id:"_3-6-删除某个-port-proxy-规则-如需"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-删除某个-port-proxy-规则-如需"}},[s._v("#")]),s._v(" 3.6 删除某个 Port Proxy 规则（如需）")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("netsh interface portproxy delete v4tov4 listenaddress=0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0 listenport=8000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("hr"),s._v(" "),t("h3",{attrs:{id:"_3-7-批量添加多个端口转发规则-推荐"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-批量添加多个端口转发规则-推荐"}},[s._v("#")]),s._v(" 3.7 批量添加多个端口转发规则（推荐）")]),s._v(" "),t("p",[s._v("你可以创建一个 PowerShell 脚本文件来一次性添加多个服务端口。")]),s._v(" "),t("h4",{attrs:{id:"示例脚本-setup-portproxy-ps1"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例脚本-setup-portproxy-ps1"}},[s._v("#")]),s._v(" 示例脚本："),t("code",[s._v("setup-portproxy.ps1")])]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 先清除旧规则（可选）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# netsh interface portproxy reset all")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加多个端口转发规则")]),s._v("\nnetsh interface portproxy add v4tov4 listenaddress=0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0 listenport=80    connectaddress=172"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("27"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("250"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("42 connectport=80\nnetsh interface portproxy add v4tov4 listenaddress=0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0 listenport=22    connectaddress=172"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("27"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("250"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("42 connectport=22\nnetsh interface portproxy add v4tov4 listenaddress=0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0 listenport=3306  connectaddress=172"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("27"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("250"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("42 connectport=3306\nnetsh interface portproxy add v4tov4 listenaddress=0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0 listenport=8080  connectaddress=172"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("27"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("250"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("42 connectport=8080\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("📌 "),t("strong",[s._v("使用方式：")])]),s._v(" "),t("ol",[t("li",[s._v("将上述内容保存为 "),t("code",[s._v("setup-portproxy.ps1")])]),s._v(" "),t("li",[s._v("右键 → “以管理员身份运行”")])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_3-8-设置脚本开机自启-可选但推荐"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-8-设置脚本开机自启-可选但推荐"}},[s._v("#")]),s._v(" 3.8 设置脚本开机自启（可选但推荐）")]),s._v(" "),t("h4",{attrs:{id:"方法-放入-启动-文件夹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法-放入-启动-文件夹"}},[s._v("#")]),s._v(" 方法：放入“启动”文件夹")]),s._v(" "),t("ol",[t("li",[s._v("按下 "),t("code",[s._v("Win + R")]),s._v(" 输入 "),t("code",[s._v("shell:startup")]),s._v(" 打开“启动”文件夹")]),s._v(" "),t("li",[s._v("创建快捷方式指向你的 "),t("code",[s._v(".ps1")]),s._v(" 脚本，例如：")])]),s._v(" "),t("div",{staticClass:"language-text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('PowerShell.exe -ExecutionPolicy Bypass -File "C:\\scripts\\setup-portproxy.ps1"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("📌 "),t("strong",[s._v("注意：")])]),s._v(" "),t("ul",[t("li",[s._v("确保路径正确")]),s._v(" "),t("li",[s._v("首次运行前建议测试脚本是否正常工作")])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"第四章-验证服务是否可达"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第四章-验证服务是否可达"}},[s._v("#")]),s._v(" 第四章：验证服务是否可达")]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_4-1-在宿主机上测试本地访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-在宿主机上测试本地访问"}},[s._v("#")]),s._v(" 4.1 在宿主机上测试本地访问")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("telnet "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("hr"),s._v(" "),t("h3",{attrs:{id:"_4-2-在局域网设备上测试访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-在局域网设备上测试访问"}},[s._v("#")]),s._v(" 4.2 在局域网设备上测试访问")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("telnet "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Windows宿主机IP"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("telnet "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.10 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果连接成功，说明服务已开放！")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"附录-a-常用命令汇总"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#附录-a-常用命令汇总"}},[s._v("#")]),s._v(" 附录 A：常用命令汇总")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("操作")]),s._v(" "),t("th",[s._v("命令")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("获取 WSL IP 地址")]),s._v(" "),t("td",[t("code",[s._v("hostname -I")])])]),s._v(" "),t("tr",[t("td",[s._v("添加防火墙规则")]),s._v(" "),t("td",[t("code",[s._v('New-NetFirewallRule -DisplayName "WSL" ...')])])]),s._v(" "),t("tr",[t("td",[s._v("添加端口转发")]),s._v(" "),t("td",[t("code",[s._v("netsh interface portproxy add v4tov4 ...")])])]),s._v(" "),t("tr",[t("td",[s._v("查看所有转发规则")]),s._v(" "),t("td",[t("code",[s._v("netsh interface portproxy show all")])])]),s._v(" "),t("tr",[t("td",[s._v("删除指定转发规则")]),s._v(" "),t("td",[t("code",[s._v("netsh interface portproxy delete v4tov4 ...")])])]),s._v(" "),t("tr",[t("td",[s._v("测试端口连通性")]),s._v(" "),t("td",[t("code",[s._v("telnet <IP> <Port>")])])]),s._v(" "),t("tr",[t("td",[s._v("查看端口占用情况")]),s._v(" "),t("td",[t("code",[s._v("netstat -ano \\| findstr :<Port>")])])]),s._v(" "),t("tr",[t("td",[s._v("查看进程 ID 对应程序")]),s._v(" "),t("td",[t("code",[s._v("tasklist \\| findstr <PID>")])])])])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"附录-b-完整脚本模板下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#附录-b-完整脚本模板下载"}},[s._v("#")]),s._v(" 附录 B：完整脚本模板下载")]),s._v(" "),t("p",[s._v("你可以将以下内容分别保存为：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("start-wsl-background.vbs")]),s._v("：用于开机自动运行 WSL")]),s._v(" "),t("li",[t("code",[s._v("setup-portproxy.ps1")]),s._v("：用于配置多个端口转发规则")])]),s._v(" "),t("h3",{attrs:{id:"✅-start-wsl-background-vbs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#✅-start-wsl-background-vbs"}},[s._v("#")]),s._v(" ✅ "),t("code",[s._v("start-wsl-background.vbs")])]),s._v(" "),t("div",{staticClass:"language-vbs line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('Set objShell = CreateObject("WScript.Shell")\nobjShell.Run "cmd /c wsl", 0, False\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"✅-setup-portproxy-ps1"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#✅-setup-portproxy-ps1"}},[s._v("#")]),s._v(" ✅ "),t("code",[s._v("setup-portproxy.ps1")])]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加多个端口转发规则")]),s._v("\nnetsh interface portproxy add v4tov4 listenaddress=0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0 listenport=80    connectaddress=172"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("27"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("250"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("42 connectport=80\nnetsh interface portproxy add v4tov4 listenaddress=0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0 listenport=22    connectaddress=172"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("27"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("250"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("42 connectport=22\nnetsh interface portproxy add v4tov4 listenaddress=0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0 listenport=3306  connectaddress=172"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("27"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("250"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("42 connectport=3306\nnetsh interface portproxy add v4tov4 listenaddress=0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0 listenport=8080  connectaddress=172"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("27"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("250"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("42 connectport=8080\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("hr"),s._v(" "),t("p",[s._v("如果你希望我帮你生成完整的 ZIP 包或 PDF 格式文档，或者你想将这些脚本封装成一键安装包，请告诉我：")]),s._v(" "),t("ul",[t("li",[s._v("WSL 的实际 IP 地址")]),s._v(" "),t("li",[s._v("你常用的端口号列表（如 80, 22, 3306, 8080 等）")])]),s._v(" "),t("p",[s._v("我可以为你定制完整部署工具 👇")])])}),[],!1,null,null,null);t.default=r.exports}}]);