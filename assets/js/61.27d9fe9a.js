(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{419:function(s,t,a){"use strict";a.r(t);var e=a(8),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"✅-oh-my-posh-clink-官方推荐安装方式-适用于-windows-11"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#✅-oh-my-posh-clink-官方推荐安装方式-适用于-windows-11"}},[s._v("#")]),s._v(" ✅ Oh My Posh + Clink 官方推荐安装方式（适用于 Windows 11）")]),s._v(" "),t("blockquote",[t("p",[s._v("⚠️ 注意：Clink 并不能直接支持 Oh My Posh 的 prompt 渲染。\n实际上，是通过 "),t("strong",[s._v("Lua Hook 注入命令输出到命令行前缀")]),s._v(" 来实现 prompt 美化的。")])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"📦-一、安装依赖工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#📦-一、安装依赖工具"}},[s._v("#")]),s._v(" 📦 一、安装依赖工具")]),s._v(" "),t("h3",{attrs:{id:"_1-安装-scoop-如未安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装-scoop-如未安装"}},[s._v("#")]),s._v(" 1. 安装 Scoop（如未安装）")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Set-ExecutionPolicy")]),s._v(" RemoteSigned "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Scope CurrentUser\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("irm")]),s._v(" get"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("scoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("iex")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_2-安装-oh-my-posh-和-clink"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装-oh-my-posh-和-clink"}},[s._v("#")]),s._v(" 2. 安装 Oh My Posh 和 Clink")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("scoop install oh-my-posh clink\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"🔧-二、初始化-clink-注入到-cmd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🔧-二、初始化-clink-注入到-cmd"}},[s._v("#")]),s._v(" 🔧 二、初始化 Clink（注入到 CMD）")]),s._v(" "),t("p",[s._v("运行以下命令将 Clink 注入 CMD：")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("clink install\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这会在注册表中写入自动加载项，使每次打开 CMD 时自动启用 Clink。")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"🖌️-三、设置-oh-my-posh-主题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🖌️-三、设置-oh-my-posh-主题"}},[s._v("#")]),s._v(" 🖌️ 三、设置 Oh My Posh 主题")]),s._v(" "),t("h3",{attrs:{id:"_1-下载你喜欢的主题-例如-agnoster"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载你喜欢的主题-例如-agnoster"}},[s._v("#")]),s._v(" 1. 下载你喜欢的主题（例如 "),t("code",[s._v("agnoster")]),s._v("）")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("mkdir "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$env")]),s._v(":USERPROFILE\\"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("poshthemes\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Invoke-WebRequest")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Uri "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://raw.githubusercontent.com/JanDeDobbeleer/ohmyposh/main/themes/agnoster.omp.json"')]),s._v(" `\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("OutFile "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$env")]),s._v(':USERPROFILE\\.poshthemes\\agnoster.omp.json"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("你可以替换为任意主题文件名，比如 "),t("code",[s._v("powerlevel10k_rainbow.omp.json")]),s._v("。")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"🧠-四、编写-clink-的-lua-脚本-关键步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🧠-四、编写-clink-的-lua-脚本-关键步骤"}},[s._v("#")]),s._v(" 🧠 四、编写 Clink 的 Lua 脚本（关键步骤）")]),s._v(" "),t("h3",{attrs:{id:"创建脚本文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建脚本文件"}},[s._v("#")]),s._v(" 创建脚本文件：")]),s._v(" "),t("p",[s._v("路径示例（请确认存在）：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("%USERPROFILE%\\AppData\\Local\\clink\\ohmyposh.lua\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("内容如下：")]),s._v(" "),t("div",{staticClass:"language-lua line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-lua"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set_prompt")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 获取 oh-my-posh 输出的 prompt 内容")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" handle "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" io"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("popen")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"oh-my-posh --config \\"%USERPROFILE%\\\\.poshthemes\\\\agnoster.omp.json\\""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("not")]),s._v(" handle "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" result "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" handle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("read")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*a"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  handle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("close")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 设置命令行前缀")]),s._v("\n  clink"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setprompt")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("result "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("..")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" "')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\nclink"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prompt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("register_filter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("set_prompt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("blockquote",[t("p",[s._v("⚠️ 这个脚本的作用是：每当你输入命令前，执行一次 "),t("code",[s._v("oh-my-posh")]),s._v(" 命令，并将其输出作为新的提示符。")])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"🔁-五、注册脚本到-clink"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🔁-五、注册脚本到-clink"}},[s._v("#")]),s._v(" 🔁 五、注册脚本到 Clink")]),s._v(" "),t("p",[s._v("在 CMD 中运行：")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("clink set script %USERPROFILE%\\AppData\\Local\\clink\\ohmyposh.lua\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"💻-六、字体配置-重要-否则图标乱码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#💻-六、字体配置-重要-否则图标乱码"}},[s._v("#")]),s._v(" 💻 六、字体配置（重要！否则图标乱码）")]),s._v(" "),t("p",[s._v("Oh My Posh 使用 Nerd Fonts 提供的图标，所以必须使用兼容字体。")]),s._v(" "),t("h3",{attrs:{id:"推荐字体"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#推荐字体"}},[s._v("#")]),s._v(" 推荐字体：")]),s._v(" "),t("ul",[t("li",[s._v("Fira Code Nerd Font")]),s._v(" "),t("li",[s._v("JetBrainsMono Nerd Font")]),s._v(" "),t("li",[s._v("Cascadia Code PL")])]),s._v(" "),t("h3",{attrs:{id:"安装字体"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装字体"}},[s._v("#")]),s._v(" 安装字体：")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("scoop install nerd-fonts\nnerd-fonts install FiraCode\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("然后在终端（CMD / Windows Terminal）设置字体为 "),t("code",[s._v("FiraCode Nerd Font")])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"🧪-七、测试是否成功"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🧪-七、测试是否成功"}},[s._v("#")]),s._v(" 🧪 七、测试是否成功")]),s._v(" "),t("p",[s._v("关闭所有终端窗口，重新打开一个 CMD 或 Windows Terminal。")]),s._v(" "),t("p",[s._v("你应该看到类似这样的提示符：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("λ user@machine ~>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("或者根据你的主题不同而变化。")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"❌-如果仍然不生效-请检查以下几点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#❌-如果仍然不生效-请检查以下几点"}},[s._v("#")]),s._v(" ❌ 如果仍然不生效，请检查以下几点：")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("检查项")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("✅ 是否已正确注入 Clink？")]),s._v(" "),t("td",[t("code",[s._v("clink install")])])]),s._v(" "),t("tr",[t("td",[s._v("✅ 是否已注册 Lua 脚本？")]),s._v(" "),t("td",[t("code",[s._v("clink set script <path>")])])]),s._v(" "),t("tr",[t("td",[s._v("✅ Oh My Posh 是否可用？")]),s._v(" "),t("td",[s._v("在 CMD 中运行 "),t("code",[s._v("oh-my-posh --version")])])]),s._v(" "),t("tr",[t("td",[s._v("✅ 主题文件是否存在？")]),s._v(" "),t("td",[t("code",[s._v("$env:USERPROFILE\\.poshthemes\\*.omp.json")])])]),s._v(" "),t("tr",[t("td",[s._v("✅ 是否设置了 Nerd Font？")]),s._v(" "),t("td",[s._v("否则图标显示为乱码或空格")])]),s._v(" "),t("tr",[t("td",[s._v("✅ 脚本是否有权限读取文件？")]),s._v(" "),t("td",[s._v("尝试使用管理员权限运行 CMD")])])])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"🧹-八、卸载或重置-如有需要"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🧹-八、卸载或重置-如有需要"}},[s._v("#")]),s._v(" 🧹 八、卸载或重置（如有需要）")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("scoop uninstall oh-my-posh clink\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Remove-Item")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Recurse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Force "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$env")]),s._v(':USERPROFILE\\.poshthemes"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Remove-Item")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Recurse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Force "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$env")]),s._v(':APPDATA\\clink"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("删除注册表项：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("HKEY_CURRENT_USER\\Software\\Microsoft\\Command Processor\\AutoRun\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"📝-总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#📝-总结"}},[s._v("#")]),s._v(" 📝 总结")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("工具")]),s._v(" "),t("th",[s._v("作用")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("Clink")]),s._v(" "),t("td",[s._v("增强 CMD 功能（自动补全、历史等）")])]),s._v(" "),t("tr",[t("td",[s._v("Oh My Posh")]),s._v(" "),t("td",[s._v("提供美观的提示符模板")])]),s._v(" "),t("tr",[t("td",[s._v("Lua 脚本")]),s._v(" "),t("td",[s._v("将 Oh My Posh 输出注入到 CMD 的 prompt")])]),s._v(" "),t("tr",[t("td",[s._v("Nerd Fonts")]),s._v(" "),t("td",[s._v("显示图标、符号等装饰元素")])])])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"📄-保存建议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#📄-保存建议"}},[s._v("#")]),s._v(" 📄 保存建议")]),s._v(" "),t("p",[s._v("你可以将这份文档保存为 "),t("code",[s._v(".md")]),s._v(" 文件，比如：")]),s._v(" "),t("div",{staticClass:"language-text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ohmyposh-clink-setup-official.md\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("方便以后查阅或分享给其他用户。")]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("如果你愿意，我可以为你生成一个完整的 "),t("code",[s._v(".bat")]),s._v(" 一键部署脚本，或者帮你打包成可分发的配置包。")]),s._v(" "),t("p",[s._v("需要吗？😎")])])}),[],!1,null,null,null);t.default=n.exports}}]);