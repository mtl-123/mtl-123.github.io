---
title: zsh
date: 2025-05-07 14:25:31
permalink: /pages/640852/
categories:
  - ã€Šzshç¼–è¾‘å™¨ã€‹
tags:
  - vim
author:
  name: MeiChen
  link: https://github.com/mtl-123
---

```bsh
# ==============================================================================
# åŸºç¡€å…¨å±€é…ç½®
# ==============================================================================
ENABLE_CORRECTION="true"
COMPLETION_WAITING_DOTS="true"

export ZSH="/opt/develop/Tools/.oh-my-zsh"
export ZSH_AUTOSUGGEST_STRATEGY=(history completion)
ZSH_THEME="jonathan"

# å†å²è®°å½•
HISTSIZE=5000
SAVEHIST=$HISTSIZE
HISTDUP=erase
setopt appendhistory
setopt sharehistory
setopt hist_ignore_space
setopt hist_save_no_dups
setopt hist_ignore_dups
setopt hist_find_no_dups

# å¿«æ·é”®
bindkey -e

# ==============================================================================
# ä»£ç†é…ç½®ï¼ˆé€‚é… p ä»£ç†ï¼Œç«¯å£ 10808ï¼‰
# ==============================================================================
# æ¸…ç†æ—§ä»£ç†é…ç½®
git config --global --unset http.proxy 2>/dev/null
git config --global --unset https.proxy 2>/dev/null
git config --global --unset http.https://github.com.proxy 2>/dev/null
git config --global --unset https.https://github.com.proxy 2>/dev/null
unset http_proxy https_proxy all_proxy

PROXY_PORT="10808"
PROXY_ADDR="socks5://127.0.0.1:${PROXY_PORT}"

# ç»ˆç«¯å…¨å±€ä»£ç†
export http_proxy=${PROXY_ADDR}
export https_proxy=${PROXY_ADDR}
export all_proxy=${PROXY_ADDR}
export no_proxy="localhost,127.0.0.1,::1,*.cn,*.aliyun.com,*.taobao.com,*.tencent.com,*.baidu.com"

# Git ä»£ç†ï¼ˆä»…å¯¹ github.com ç”Ÿæ•ˆï¼‰
git config --global http.https://github.com.proxy "${PROXY_ADDR}" 2>/dev/null
git config --global https.https://github.com.proxy "${PROXY_ADDR}" 2>/dev/null

# ==============================================================================
# Zinit åˆå§‹åŒ–
# ==============================================================================
export ZINIT_HOME="${XDG_DATA_HOME:-${HOME}/.local/share}/zinit/zinit.git"

# æ¸…ç†æŸåç›®å½•
if [[ -d $ZINIT_HOME && ! -f ${ZINIT_HOME}/zinit.zsh ]]; then
    rm -rf "$ZINIT_HOME"
fi

# è‡ªåŠ¨å®‰è£… Zinit
if [[ ! -d $ZINIT_HOME ]]; then
    mkdir -p "$(dirname $ZINIT_HOME)"
    git clone https://github.com/zdharma-continuum/zinit.git "$ZINIT_HOME" 2>/dev/null || \
    git clone https://ghproxy.com/https://github.com/zdharma-continuum/zinit.git "$ZINIT_HOME"
fi

source "${ZINIT_HOME}/zinit.zsh"
autoload -Uz _zinit
(( ${+_comps} )) && _comps[zinit]=_zinit

# ==============================================================================
# Zinit æ’ä»¶é…ç½®
# ==============================================================================

# Oh My Zsh æ’ä»¶
zinit ice wait"0" lucid
zinit snippet OMZ::plugins/git/git.plugin.zsh

zinit ice wait"0" lucid
zinit snippet OMZ::plugins/git-extras/git-extras.plugin.zsh

zinit ice wait"0" lucid
zinit snippet OMZ::plugins/z/z.plugin.zsh

zinit ice wait"0" lucid
zinit snippet OMZ::plugins/autojump/autojump.plugin.zsh

zinit ice wait"0" lucid
zinit snippet OMZ::plugins/web-search/web-search.plugin.zsh

zinit ice wait"0" lucid blockf
zinit snippet OMZ::plugins/docker/docker.plugin.zsh

zinit ice wait"0" lucid blockf
zinit snippet OMZ::plugins/docker-compose/docker-compose.plugin.zsh

# ç‹¬ç«‹ä»“åº“æ’ä»¶
zinit ice wait"0" lucid
zinit light zsh-users/zsh-autosuggestions

zinit ice wait"0" lucid blockf
zinit light zsh-users/zsh-completions

# é«˜æ€§èƒ½è¯­æ³•é«˜äº®ï¼ˆå¿…é¡»åœ¨ autocomplete å‰åŠ è½½ï¼‰
zinit ice wait"0" lucid atinit"ZINIT[COMPINIT_OPTS]=-C; zicompinit; zicdreplay"
zinit light zdharma-continuum/fast-syntax-highlighting

# å®æ—¶è¡¥å…¨ï¼ˆæœ€ååŠ è½½ï¼‰
zinit ice wait"1" lucid atinit"ZINIT[COMPINIT_OPTS]=-C; zicompinit; zicdreplay"
zinit light marlonrichert/zsh-autocomplete

# ==============================================================================
# è¡¥å…¨ç³»ç»Ÿï¼ˆç”±æ’ä»¶ç®¡ç†ï¼Œç¦æ­¢ OMZ äºŒæ¬¡åˆå§‹åŒ–ï¼‰
# ==============================================================================
export SKIP_GLOBAL_COMPINIT=1

# ==============================================================================
# ç¯å¢ƒå˜é‡é…ç½®
# ==============================================================================
# åŸºç¡€ PATHï¼ˆuv å·¥å…·é»˜è®¤å®‰è£…åˆ° ~/.local/binï¼‰
export PATH="$HOME/.local/bin:$HOME/.cargo/bin:$PATH"

# Go ç¯å¢ƒ
export GO111MODULE=on
export GOROOT=/opt/develop/runtimes/go
export GOPATH=/opt/develop/Tools
export PATH="$PATH:$GOROOT/bin:$GOPATH/bin"
export GOPROXY=https://goproxy.cn,direct

# uv (Python åŒ…å·¥å…·) - ç›´æ¥ä½¿ç”¨æ ‡å‡† PATH é›†æˆ
# uv å®‰è£…çš„å·¥å…·é»˜è®¤ä½äº ~/.local/binï¼ˆLinux/macOSï¼‰æˆ– %USERPROFILE%\.local\binï¼ˆWindowsï¼‰
# æˆ‘ä»¬å·²åœ¨ PATH ä¸­åŒ…å« ~/.local/binï¼Œæ— éœ€é¢å¤–å‘½ä»¤
if command -v uv &>/dev/null; then
    # å¯é€‰ï¼šå¯ç”¨ uv çš„è‡ªåŠ¨è¡¥å…¨ï¼ˆéœ€è¦ uv 0.2.0+ï¼‰
    if uv --version &>/dev/null && [[ $(uv --version | grep -oE '[0-9]+\.[0-9]+' | head -1) > "0.1" ]]; then
        eval "$(uv generate shell-completion zsh)" 2>/dev/null || true
    fi
fi

# pyenv (Python ç‰ˆæœ¬ç®¡ç†)
if [[ -d "$HOME/.pyenv" ]]; then
    export PYENV_ROOT="$HOME/.pyenv"
    export PATH="$PYENV_ROOT/bin:$PATH"
    eval "$(pyenv init --path 2>/dev/null)" 2>/dev/null || true
    eval "$(pyenv init - 2>/dev/null)" 2>/dev/null || true
    eval "$(pyenv virtualenv-init - 2>/dev/null)" 2>/dev/null || true
fi

# kubectl (Kubernetes CLI)
if command -v kubectl &>/dev/null; then
    source <(kubectl completion zsh 2>/dev/null) 2>/dev/null || true
    alias k="kubectl"
    alias kga="kubectl get all"
    alias kaf="kubectl apply -f"
    alias krm="kubectl delete -f"
    alias klogs="kubectl logs -f"
    alias kns="kubectl config set-context --current --namespace"
fi

# ==============================================================================
# å®ç”¨åˆ«åä¸å‡½æ•°
# ==============================================================================
alias ll='ls -alF --color=auto'
alias la='ls -A --color=auto'
alias l='ls -CF --color=auto'
alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'

# Git å¢å¼º
alias gs='git status'
alias ga='git add'
alias gc='git commit -v'
alias gp='git push'
alias gl='git log --oneline --graph --all'

# Docker å¿«æ·å‘½ä»¤
alias dps='docker ps --format "table {{.ID}}\t{{.Names}}\t{{.Status}}\t{{.Ports}}"'
alias dim='docker images'
alias dclean='docker system prune -f'

# ä»£ç†å¼€å…³
proxy-on() {
    export http_proxy="${PROXY_ADDR}"
    export https_proxy="${PROXY_ADDR}"
    export all_proxy="${PROXY_ADDR}"
    echo "âœ… å…¨å±€ä»£ç†å·²å¼€å¯ (socks5://127.0.0.1:${PROXY_PORT})"
}
proxy-off() {
    unset http_proxy https_proxy all_proxy
    echo "ğŸ“´ å…¨å±€ä»£ç†å·²å…³é—­"
}

# ==============================================================================
# è¯­è¨€ä¸ç»ˆç«¯ç¯å¢ƒ
# ==============================================================================
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8
export EDITOR=${EDITOR:-vim}
export VISUAL=${VISUAL:-vim}

# ==============================================================================
# Oh My Zsh ä¸»ä½“åŠ è½½
# ==============================================================================
source "$ZSH/oh-my-zsh.sh"

# ==============================================================================
# å¯åŠ¨åè‡ªåŠ¨æ¶ˆæ¯
# ==============================================================================
if [[ -z "$TMUX" && "$TERM_PROGRAM" != "vscode" ]]; then
    # å‡†ç¡®ç»Ÿè®¡ zinit åŠ è½½çš„æ’ä»¶æ•°é‡
    PLUGIN_COUNT=$(zinit loaded 2>/dev/null | grep -c '^' || echo "0")
    echo -e "\033[0;36mâœ¨ Zsh å¯åŠ¨å®Œæˆ | ä»£ç†ç«¯å£: ${PROXY_PORT} | æ’ä»¶: ${PLUGIN_COUNT} ä¸ª\033[0m"
fi
```
