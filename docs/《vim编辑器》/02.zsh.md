---
title: zsh
date: 2025-05-07 14:25:31
permalink: /pages/640852/
categories:
  - ã€Šzshç¼–è¾‘å™¨ã€‹
tags:
  - vim
author:
  name: MeiChen
  link: https://github.com/mtl-123
---

# Debian13 æ’ä»¶æ¨è

Dash to Dock

User Themes

Hide Top Bar

Blur my Shell

Coverflow Alt-Tab

AppIndicator and KStatusNotifierItem Support

# æŠŠä¸€ä¸‹å†…å®¹æ·»åŠ åˆ°.zshrcæ–‡ä»¶ä¸­
`vim .zshrc`

```bsh
# ==============================================================================
# åŸºç¡€å…¨å±€é…ç½®
# ==============================================================================
ENABLE_CORRECTION="true"
COMPLETION_WAITING_DOTS="true"

# è‡ªå®šä¹‰ Oh My Zsh è·¯å¾„ï¼ˆä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»ºï¼‰
export ZSH="/opt/develop/Tools/.oh-my-zsh"
export ZSH_AUTOSUGGEST_STRATEGY=(history completion)
ZSH_THEME="jonathan"

# å†å²è®°å½•ä¼˜åŒ–
HISTSIZE=5000
SAVEHIST=$HISTSIZE
HISTDUP=erase
setopt appendhistory
setopt sharehistory
setopt hist_ignore_space
setopt hist_save_no_dups
setopt hist_ignore_dups
setopt hist_find_no_dups

# å¿«æ·é”®ï¼šemacs æ¨¡å¼
bindkey -e

# ==============================================================================
# ä»£ç†é…ç½®ï¼ˆé€‚é… clash/p ç­‰ï¼Œç«¯å£ 10808ï¼‰
# ==============================================================================
# æ¸…ç†æ—§ä»£ç†æ®‹ç•™
git config --global --unset http.proxy 2>/dev/null
git config --global --unset https.proxy 2>/dev/null
git config --global --unset http.https://github.com.proxy 2>/dev/null
git config --global --unset https.https://github.com.proxy 2>/dev/null
unset http_proxy https_proxy all_proxy

PROXY_PORT="10808"
PROXY_ADDR="socks5://127.0.0.1:${PROXY_PORT}"

# å…¨å±€ç»ˆç«¯ä»£ç†
export http_proxy="${PROXY_ADDR}"
export https_proxy="${PROXY_ADDR}"
export all_proxy="${PROXY_ADDR}"
export no_proxy="localhost,127.0.0.1,::1,*.cn,*.aliyun.com,*.taobao.com,*.tencent.com,*.baidu.com"

# Git ä¸“å±ä»£ç†ï¼ˆä»… github.comï¼‰
git config --global http.https://github.com.proxy "${PROXY_ADDR}" 2>/dev/null
git config --global https.https://github.com.proxy "${PROXY_ADDR}" 2>/dev/null

# ==============================================================================
# Zinit åˆå§‹åŒ–ï¼ˆé«˜æ€§èƒ½æ’ä»¶ç®¡ç†å™¨ï¼‰
# ==============================================================================
export ZINIT_HOME="${XDG_DATA_HOME:-${HOME}/.local/share}/zinit/zinit.git"

# ä¿®å¤æŸåçš„ Zinit ç›®å½•
if [[ -d "$ZINIT_HOME" && ! -f "${ZINIT_HOME}/zinit.zsh" ]]; then
    rm -rf "$ZINIT_HOME"
fi

# è‡ªåŠ¨å®‰è£… Zinitï¼ˆåŒæºä¿éšœï¼‰
if [[ ! -d "$ZINIT_HOME" ]]; then
    mkdir -p "$(dirname "$ZINIT_HOME")"
    if ! git clone https://github.com/zdharma-continuum/zinit.git "$ZINIT_HOME" 2>/dev/null; then
        git clone https://ghproxy.com/https://github.com/zdharma-continuum/zinit.git "$ZINIT_HOME"
    fi
fi

source "${ZINIT_HOME}/zinit.zsh"
autoload -Uz _zinit
(( ${+_comps} )) && _comps[zinit]=_zinit

# ==============================================================================
# Zinit æ’ä»¶é…ç½®ï¼ˆæŒ‰åŠ è½½é¡ºåºä¼˜åŒ–ï¼‰
# ==============================================================================
# Oh My Zsh æ’ä»¶ï¼ˆé€šè¿‡ snippet å¤ç”¨ï¼Œé¿å…å®Œæ•´åŠ è½½ OMZ æ¡†æ¶ï¼‰
zinit ice wait"0" lucid
zinit snippet OMZ::plugins/git/git.plugin.zsh

zinit ice wait"0" lucid
zinit snippet OMZ::plugins/git-extras/git-extras.plugin.zsh

zinit ice wait"0" lucid
zinit snippet OMZ::plugins/z/z.plugin.zsh

zinit ice wait"0" lucid
zinit snippet OMZ::plugins/autojump/autojump.plugin.zsh

zinit ice wait"0" lucid
zinit snippet OMZ::plugins/web-search/web-search.plugin.zsh

zinit ice wait"0" lucid blockf
zinit snippet OMZ::plugins/docker/docker.plugin.zsh

zinit ice wait"0" lucid blockf
zinit snippet OMZ::plugins/docker-compose/docker-compose.plugin.zsh

# ç‹¬ç«‹é«˜æ€§èƒ½æ’ä»¶
zinit ice wait"0" lucid
zinit light zsh-users/zsh-autosuggestions

zinit ice wait"0" lucid blockf
zinit light zsh-users/zsh-completions

# è¯­æ³•é«˜äº®ï¼ˆå¿…é¡»åœ¨ autocomplete å‰åŠ è½½ï¼‰
zinit ice wait"0" lucid atinit"ZINIT[COMPINIT_OPTS]=-C; zicompinit; zicdreplay"
zinit light zdharma-continuum/fast-syntax-highlighting

# æ™ºèƒ½å®æ—¶è¡¥å…¨ï¼ˆæœ€ååŠ è½½ï¼‰
zinit ice wait"1" lucid atinit"ZINIT[COMPINIT_OPTS]=-C; zicompinit; zicdreplay"
zinit light marlonrichert/zsh-autocomplete

# ==============================================================================
# è¡¥å…¨ç³»ç»Ÿéš”ç¦»ï¼ˆç¦æ­¢ OMZ äºŒæ¬¡åˆå§‹åŒ–ï¼‰
# ==============================================================================
export SKIP_GLOBAL_COMPINIT=1

# ==============================================================================
# ç¯å¢ƒå˜é‡é…ç½®
# ==============================================================================
# åŸºç¡€ PATHï¼ˆä¼˜å…ˆçº§ï¼šç”¨æˆ·æœ¬åœ° > cargo > ç³»ç»Ÿï¼‰
export PATH="$HOME/.local/bin:$HOME/.cargo/bin:$PATH"

# Go ç¯å¢ƒ
export GO111MODULE=on
export GOROOT=/opt/develop/runtimes/go
export GOPATH=/opt/develop/Tools
export PATH="$PATH:$GOROOT/bin:$GOPATH/bin"
export GOPROXY="https://goproxy.cn,direct"

# uv (Python åŒ…å·¥å…·) - ä¿®å¤è¡¥å…¨å‘½ä»¤ï¼ˆ0.2.0+ ä½¿ç”¨ generate-shell-completionï¼‰
if command -v uv &>/dev/null; then
    # å…¼å®¹æ–°æ—§ç‰ˆæœ¬ï¼šä¼˜å…ˆå°è¯•æ–°å‘½ä»¤ï¼Œå¤±è´¥å›é€€åˆ°æ—§å‘½ä»¤
    if uv generate-shell-completion zsh &>/dev/null 2>&1; then
        eval "$(uv generate-shell-completion zsh)"
    elif uv --generate-shell-completion zsh &>/dev/null 2>&1; then
        eval "$(uv --generate-shell-completion zsh)"
    fi
fi

# pyenv (Python ç‰ˆæœ¬ç®¡ç†)
if [[ -d "$HOME/.pyenv" ]]; then
    export PYENV_ROOT="$HOME/.pyenv"
    export PATH="$PYENV_ROOT/bin:$PATH"
    eval "$(pyenv init --path 2>/dev/null)" 2>/dev/null || true
    eval "$(pyenv init - 2>/dev/null)" 2>/dev/null || true
    eval "$(pyenv virtualenv-init - 2>/dev/null)" 2>/dev/null || true
fi

# kubectl (Kubernetes CLI)
if command -v kubectl &>/dev/null; then
    source <(kubectl completion zsh 2>/dev/null) 2>/dev/null || true
    alias k="kubectl"
    alias kga="kubectl get all"
    alias kaf="kubectl apply -f"
    alias krm="kubectl delete -f"
    alias klogs="kubectl logs -f"
    alias kns="kubectl config set-context --current --namespace"
fi

# ==============================================================================
# å®ç”¨åˆ«åä¸å‡½æ•°
# ==============================================================================
alias ll='ls -alF --color=auto'
alias la='ls -A --color=auto'
alias l='ls -CF --color=auto'
alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'

# Git å¢å¼º
alias gs='git status'
alias ga='git add'
alias gc='git commit -v'
alias gp='git push'
alias gl='git log --oneline --graph --all'

# Docker å¿«æ·å‘½ä»¤
alias dps='docker ps --format "table {{.ID}}\t{{.Names}}\t{{.Status}}\t{{.Ports}}"'
alias dim='docker images'
alias dclean='docker system prune -af --volumes'

# ä»£ç†å¼€å…³
proxy-on() {
    export http_proxy="${PROXY_ADDR}"
    export https_proxy="${PROXY_ADDR}"
    export all_proxy="${PROXY_ADDR}"
    echo "âœ… å…¨å±€ä»£ç†å·²å¼€å¯ (socks5://127.0.0.1:${PROXY_PORT})"
}
proxy-off() {
    unset http_proxy https_proxy all_proxy
    echo "ğŸ“´ å…¨å±€ä»£ç†å·²å…³é—­"
}

# ==============================================================================
# è¯­è¨€ä¸ç»ˆç«¯ç¯å¢ƒ
# ==============================================================================
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8
export EDITOR=${EDITOR:-vim}
export VISUAL=${VISUAL:-vim}

# ==============================================================================
# Oh My Zsh æ ¸å¿ƒåŠ è½½ï¼ˆä»…åŠ è½½æ¡†æ¶ï¼Œæ’ä»¶ç”± Zinit ç®¡ç†ï¼‰
# ==============================================================================
if [[ -d "$ZSH" ]]; then
    source "$ZSH/oh-my-zsh.sh"
else
    echo "âš ï¸ Oh My Zsh æœªå®‰è£…åˆ° $ZSHï¼Œè·³è¿‡åŠ è½½"
fi

# ==============================================================================
# å¯åŠ¨åè‡ªåŠ¨æ¶ˆæ¯ï¼ˆä¿®å¤æ’ä»¶è®¡æ•°ï¼šå¼‚æ­¥åŠ è½½éœ€å»¶è¿Ÿç»Ÿè®¡ï¼‰
# ==============================================================================
if [[ -z "$TMUX" && "$TERM_PROGRAM" != "vscode" ]]; then
    # å»¶è¿Ÿ 300ms ç»Ÿè®¡çœŸå®åŠ è½½æ’ä»¶æ•°ï¼ˆZinit å¼‚æ­¥åŠ è½½ç‰¹æ€§ï¼‰
    (sleep 0.3; PLUGIN_COUNT=$(zinit loaded 2>/dev/null | grep -c '^' || echo "0"); 
     echo -e "\033[0;36mâœ¨ Zsh å¯åŠ¨å®Œæˆ | ä»£ç†ç«¯å£: ${PROXY_PORT} | æ’ä»¶: ${PLUGIN_COUNT} ä¸ª (å¼‚æ­¥åŠ è½½ä¸­)\033[0m") &
fi
```
3. é‡è½½é…ç½®
`source ~/.zshrc`

# zinit ç”¨æ³•
1. æŸ¥çœ‹å·²åŠ è½½çš„æ’ä»¶åˆ—è¡¨
zinit loaded
2. æŸ¥çœ‹æ‰€æœ‰å·²å®‰è£…æ’ä»¶ï¼ˆåŒ…æ‹¬æœªåŠ è½½çš„ï¼‰
zinit list
3.æŸ¥çœ‹æŸä¸ªæ’ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼ˆä¾‹å¦‚ zsh-autosuggestionsï¼‰
zinit info zsh-users/zsh-autosuggestions
zinit verbose on
# ç„¶åé‡æ–°åŠ è½½æ’ä»¶ï¼ˆè§ä¸‹æ–‡â€œé‡è½½â€éƒ¨åˆ†ï¼‰
zinit verbose off
# å…ˆæ¸…ç†å½“å‰ä¼šè¯çš„æ’ä»¶çŠ¶æ€
zinit delete --clean
æ›´æ–°æ‰€æœ‰æ’ä»¶åˆ°æœ€æ–°ç‰ˆæœ¬
zinit update --all
# æ›´æ–°å•ä¸ªæ’ä»¶
zinit update zdharma-continuum/fast-syntax-highlighting


# å¸è½½æ’ä»¶ 
# å¸è½½
zinit unload zdharma-continuum/fast-syntax-highlighting
# é‡æ–°åŠ è½½
zinit light zdharma-continuum/fast-syntax-highlighting

å¼ºåˆ¶é‡æ–°åŠ è½½æŸä¸ªæ’ä»¶ï¼ˆå¼€å‘è°ƒè¯•ç”¨ï¼‰
# æ¸…é™¤æ‰€æœ‰ç¼–è¯‘ç¼“å­˜
zinit compinit -R
# é‡æ–°åˆå§‹åŒ–è¡¥å…¨ç³»ç»Ÿ
zinit compinit
# é‡è½½zsh
exec zsh
